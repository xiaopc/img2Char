(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],g=0,d=[];g<o.length;g++)s=o[g],i[s]&&d.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),i=n.n(a);i.a},"4c4a":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",{staticClass:"title-inline",attrs:{contenteditable:""}},[t._v("字符画生成器")]),t._m(0),n("breadcrumb",{attrs:{settings:t.panels},on:{change:t.handleTabChange}}),n(t.panels.current,{tag:"component",staticClass:"page",attrs:{settings:t.settings},on:{setConfig:t.onGetConfig,setImage:t.onGetImage,gotoPage:t.gotoPage}})],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("embed",{attrs:{src:"https://img.shields.io/github/stars/xiaopc/img2Char.svg?style=social&label=Star&maxAge=2592000",alt:"Github: xiaopc/img2Char"}})])}],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breadcrumb"},[n("form",{staticClass:"bread-form",attrs:{input:t.$emit("change",t.settings)}},t._l(t.settings.list,function(e){return n("div",{key:e.name,staticClass:"bread-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.current,expression:"settings.current"}],staticClass:"bread-radio",attrs:{type:"radio",id:e.name},domProps:{value:e.name,checked:t._q(t.settings.current,e.name)},on:{change:function(n){t.$set(t.settings,"current",e.name)}}}),n("label",{staticClass:"bread-label",attrs:{for:e.name}},[t._v(t._s(e.text))])])}),0)])},o=[],c={name:"Breadcrumb",props:{settings:Object},computed:{},methods:{},mounted:function(){}},l=c,u=(n("7571"),n("2877")),g=Object(u["a"])(l,s,o,!1,null,"3811464d",null);g.options.__file="Breadcrumb.vue";var d=g.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"select-panel"}},[n("div",{staticClass:"picInput-outer"},[n("picture-input",{ref:"pictureInput",attrs:{margin:"16",accept:"image/jpeg,image/png",size:"3","button-class":"btn","custom-strings":{tap:"<small>🐾<br>轻触选择图片<br>(暂不支持动图)</small>",drag:"<small>🐾<br>把图片拖进来<br>或者点击选择<br>(暂不支持动图)</small>",change:"换一张"}},on:{change:t.onChange}})],1)])},m=[],h=n("e597"),p={name:"ImageSelect",components:{PictureInput:h["a"]},props:{settings:Object},methods:{onChange:function(t){t?(this.$emit("setImage",t),this.$emit("gotoPage","Settings")):alert("你的浏览器不资瓷 FileReader API，请使用现代浏览器。")}}},v=p,b=(n("f00d"),Object(u["a"])(v,f,m,!1,null,"ee4ace66",null));b.options.__file="ImageSelect.vue";var y=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"settings-panel"}},[n("div",{style:{position:"absolute",width:"calc(100% - 6rem)",height:"calc(100% - 15em)",zIndex:"-1",backgroundImage:"url("+t.settings.image+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain",filter:"blur(5px)"},attrs:{id:"preview"}}),n("form",{attrs:{input:t.$emit("setConfig",t.settings.config),id:"settings-form"}},[n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"},[t._v("转换类型")]),n("div",{staticClass:"control-area"},[n("div",{staticClass:"control-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.config.mode,expression:"settings.config.mode"}],attrs:{type:"radio",id:"mode-color",value:"color"},domProps:{checked:t._q(t.settings.config.mode,"color")},on:{change:function(e){t.$set(t.settings.config,"mode","color")}}}),n("label",{attrs:{for:"mode-color"}},[t._v("彩色")])]),n("div",{staticClass:"control-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.config.mode,expression:"settings.config.mode"}],attrs:{type:"radio",id:"mode-gray",value:"gray"},domProps:{checked:t._q(t.settings.config.mode,"gray")},on:{change:function(e){t.$set(t.settings.config,"mode","gray")}}}),n("label",{attrs:{for:"mode-gray"}},[t._v("黑白")])])])]),n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"},[t._v("放大倍率")]),n("div",{staticClass:"control-area"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.settings.config.ratio,expression:"settings.config.ratio",modifiers:{number:!0}}],attrs:{type:"text",id:"ratio"},domProps:{value:t.settings.config.ratio},on:{input:function(e){e.target.composing||t.$set(t.settings.config,"ratio",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._m(0)])]),n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"},[t._v("使用字符")]),n("div",{staticClass:"control-area"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.config.chars,expression:"settings.config.chars"}],attrs:{type:"text",id:"chars"},domProps:{value:t.settings.config.chars},on:{input:function(e){e.target.composing||t.$set(t.settings.config,"chars",e.target.value)}}}),"gray"==t.settings.config.mode?n("label",{attrs:{for:"chars"}},[n("br"),t._v("按复杂到简单排序文字，效果更好。")]):t._e()])]),"color"==t.settings.config.mode?n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"}),n("div",{staticClass:"control-area"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.config.charRand,expression:"settings.config.charRand"}],attrs:{type:"checkbox",id:"charRand"},domProps:{checked:Array.isArray(t.settings.config.charRand)?t._i(t.settings.config.charRand,null)>-1:t.settings.config.charRand},on:{change:function(e){var n=t.settings.config.charRand,a=e.target,i=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(t.settings.config,"charRand",n.concat([r])):s>-1&&t.$set(t.settings.config,"charRand",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.settings.config,"charRand",i)}}}),n("label",{attrs:{for:"charRand"}},[t._v("打乱顺序")])])]):t._e(),n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"},[t._v("字符宽度")]),n("div",{staticClass:"control-area"},[n("div",{staticClass:"control-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.config.charWidth,expression:"settings.config.charWidth"}],attrs:{type:"radio",id:"charWidth-en",value:"1"},domProps:{checked:t._q(t.settings.config.charWidth,"1")},on:{change:function(e){t.$set(t.settings.config,"charWidth","1")}}}),n("label",{attrs:{for:"charWidth-en"}},[t._v("窄字符(英文标点)")])]),n("div",{staticClass:"control-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.config.charWidth,expression:"settings.config.charWidth"}],attrs:{type:"radio",id:"charWidth-cn",value:"2"},domProps:{checked:t._q(t.settings.config.charWidth,"2")},on:{change:function(e){t.$set(t.settings.config,"charWidth","2")}}}),n("label",{attrs:{for:"charWidth-cn"}},[t._v("宽字符(中文标点)")])])])]),n("button",{on:{click:t.gotoRes}},[t._v("生成")])])])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"ratio"}},[n("br"),t._v("(宽度 6px = 1 窄字符)")])}],x={name:"Settings",props:{settings:Object},computed:{},methods:{gotoRes:function(t){t.preventDefault(),this.$emit("gotoPage","Result")}}},k=x,w=(n("fe14"),Object(u["a"])(k,_,C,!1,null,"d0744d5e",null));w.options.__file="Settings.vue";var S=w.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"result-panel"}},[n("div",{staticClass:"control-inline"},[n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"},[t._v("文字大小")]),n("div",{staticClass:"control-area"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.style.fontSize,expression:"style.fontSize"}],attrs:{type:"text"},domProps:{value:t.style.fontSize},on:{input:function(e){e.target.composing||t.$set(t.style,"fontSize",e.target.value)}}})])]),n("div",{staticClass:"control-group"},[n("label",{staticClass:"control-label"},[t._v("行高")]),n("div",{staticClass:"control-area"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.style.lineHeight,expression:"style.lineHeight"}],attrs:{type:"text"},domProps:{value:t.style.lineHeight},on:{input:function(e){e.target.composing||t.$set(t.style,"lineHeight",e.target.value)}}})])]),n("button",{staticStyle:{flex:"1",margin:"0 2%"},attrs:{type:"button"},on:{click:t.openPicker}},[t._v("背景色")]),t.colorpicker?n("sketch-picker",{attrs:{id:"color-picker",value:t.style.background},on:{input:t.handleBgChange}}):t._e(),n("button",{staticStyle:{flex:"1",margin:"0 2%"},attrs:{type:"button"},on:{click:t.doCopy}},[t._v("复制文本")]),n("button",{staticStyle:{flex:"1",margin:"0 2%"},attrs:{type:"button"},on:{click:t.doPic}},[t._v("查看截图")])],1),t.isHTML?n("div",{staticClass:"asc-result"},[n("span",{ref:"resultHTML",staticStyle:{"min-width":"max-content","min-height":"max-content",display:"block"},style:t.style,domProps:{innerHTML:t._s(t.result)}})]):n("div",{staticClass:"asc-result-pic"},[n("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.imgUrl}})])])},$=[],R=(n("ac6a"),n("96cf"),n("1da1"));function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.createElement("canvas"),a=n.getContext("2d"),i=t.width/t.naturalWidth;n.width=t.width*e,n.height=t.height*e,a.drawImage(t,0,0,n.width,n.height),a.scale(i*e,i*e);var r=a.getImageData(0,0,t.width*e,t.height*e);return r}var O=6,I=12;function W(t,e,n){return(299*t+587*e+114*n+500)/1e3}function M(t){var e=255/t.length;function n(n){var a=n/e>>0;return a>=t.length&&(a=t.length-1),t[a]}return n}function H(t,e,n){for(var a=t.data,i=t.width,r=t.height,s=[],o=0;o<r;o+=I){for(var c="",l=0;l<i;l+=O*e){var u=4*(l+i*o),g=W(a[u],a[u+1],a[u+2]);c+=n(0==a[u+3]?255:g)}s.push(c)}return s}n("c5f6"),n("6b54");function N(t,e,n,a,i,r,s){var o="#",c=a/255,l=Math.floor(t*c+i*(1-c)),u=Math.floor(e*c+r*(1-c)),g=Math.floor(n*c+s*(1-c));return o+=("0"+Number(l).toString(16)).slice(-2),o+=("0"+Number(u).toString(16)).slice(-2),o+=("0"+Number(g).toString(16)).slice(-2),o}function E(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.length,a=0;function i(){return t[a++%n]}function r(){return t[Math.floor(Math.random()*n)]}return e?r:i}function T(t,e,n){for(var a=t.data,i=t.width,r=t.height,s=[],o=0;o<r;o+=I){for(var c="",l=0;l<i;l+=O*e){var u=4*(l+i*o),g=N(a[u],a[u+1],a[u+2],a[u+3],255,255,255);c+='<span style="color:'+g+'">'+n()+"</span>"}s.push(c)}return s}function L(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(n){e&&n.clipboardData.setData("text/html",t),n.clipboardData.setData("text/plain",t),n.preventDefault()}document.addEventListener("copy",n),document.execCommand("copy"),document.removeEventListener("copy",n)}var z=n("c345"),A={name:"Result",components:{"sketch-picker":z["Sketch"]},props:{settings:Object},data:function(){return{result:"请先完成前两步",imgUrl:null,isHTML:!0,colorpicker:!1,style:{fontSize:"12px",lineHeight:"1.5",background:"#fff"}}},computed:{},methods:{doCopy:function(){L(this.result,"color"==this.settings.config.mode)},doPic:function(){var t=Object(R["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.imgUrl){t.next=5;break}return e=this.$refs.resultHTML,t.next=4,this.$html2canvas(e,{type:"dataURL"});case 4:this.imgUrl=t.sent;case 5:this.isHTML=!this.isHTML;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openPicker:function(){this.colorpicker=!this.colorpicker},handleBgChange:function(t){this.style.background="rgba("+t.rgba.r+", "+t.rgba.g+", "+t.rgba.b+","+t.rgba.a+")"}},mounted:function(){var t=this;if(t.settings.image){t.result="转换中...";var e=new Image;e.onload=function(){var n=j(e,t.settings.config.ratio);if("color"==t.settings.config.mode){var a=E(t.settings.config.chars,t.settings.config.charRand),i=T(n,t.settings.config.charWidth,a);t.result="",i.forEach(function(e){t.result=t.result+e+"<br>"})}else{var r=t.settings.config.chars+("1"==t.settings.config.charWidth?" ":"　"),s=M(r),o=H(n,t.settings.config.charWidth,s);t.result="",o.forEach(function(e){t.result=t.result+"<pre>"+e+"</pre>"})}},e.src=this.settings.image,"2"==t.settings.config.charWidth&&(t.style.lineHeight="1")}}},D=A,U=(n("7017"),Object(u["a"])(D,P,$,!1,null,"78c66243",null));U.options.__file="Result.vue";var q=U.exports,B={name:"app",components:{Breadcrumb:d,ImageSelect:y,Settings:S,Result:q},data:function(){return{panels:{list:[{name:"ImageSelect",text:"选择图片"},{name:"Settings",text:"设置参数"},{name:"Result",text:"获得输出"}],current:"ImageSelect"},settings:{image:null,config:{mode:"color",ratio:"1",chars:"@#&$%863!i1uazvno~;*^+-.",charWidth:"1",charRand:!1}}}},methods:{onGetConfig:function(t){this.settings.config=t},onGetImage:function(t){this.settings.image=t},handleTabChange:function(t){this.panels.current=t.current},gotoPage:function(t){this.panels.current=t}}},G=B,J=(n("034f"),Object(u["a"])(G,i,r,!1,null,null,null));J.options.__file="App.vue";var F=J.exports,K=n("63d6"),Q=n.n(K);a["a"].use(Q.a),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(F)}}).$mount("#app")},"64a9":function(t,e,n){},7017:function(t,e,n){"use strict";var a=n("fab5"),i=n.n(a);i.a},7571:function(t,e,n){"use strict";var a=n("b4ef"),i=n.n(a);i.a},b4ef:function(t,e,n){},d268:function(t,e,n){},f00d:function(t,e,n){"use strict";var a=n("4c4a"),i=n.n(a);i.a},fab5:function(t,e,n){},fe14:function(t,e,n){"use strict";var a=n("d268"),i=n.n(a);i.a}});
//# sourceMappingURL=app.9d45c223.js.map